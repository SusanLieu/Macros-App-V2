{"remainingRequest":"/Users/susanlieu/Macros-App-V2/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/susanlieu/Macros-App-V2/client/src/views/Meal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/susanlieu/Macros-App-V2/client/src/views/Meal.vue","mtime":1571168737714},{"path":"/Users/susanlieu/Macros-App-V2/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/susanlieu/Macros-App-V2/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n// @ is an alias to /src\nimport { Api } from '@/Api'\nimport { ModelListSelect } from 'vue-search-select'\n\nexport default {\n  name: 'Meal',\n  components: {\n    ModelListSelect\n  },\n  data() {\n    return {\n      mealType: '',\n      amount: '',\n      mealIngredients: [],\n      mealSum: {\n        calories: null,\n        protein: null,\n        carbs: null,\n        fat: null\n      },\n      options: [],\n      objectItem: {\n        _id: '',\n        name: '',\n        calories: null,\n        protein: null,\n        carbs: null,\n        fat: null\n      },\n      errorMessage: ''\n    }\n  },\n  created() {\n    this.getIngredients()\n  },\n  methods: {\n    getIngredients() {\n      Api.get(`/ingredients`)\n      .then(response => {\n        this.options = response.data.ingredients\n      })\n      .catch(error => {\n        console.log(error)\n      })\n    },\n    addIngredient() {\n      this.mealIngredients.push({\n      name: this.objectItem.name,\n      mealType: this.mealType,\n      amount: this.amount * 100,\n      calories: this.round((this.objectItem.calories * this.amount), 1),\n      protein: this.round((this.objectItem.protein * this.amount), 1),\n      carbs: this.round((this.objectItem.carbs * this.amount), 1),\n      fat: this.round((this.objectItem.fat * this.amount), 1),\n      date: this.$route.params.date\n      })\n      this.getMealSum(this.mealIngredients)\n    },\n    getMealSum(ingredients) {\n      var caloriesSum = 0\n      var proteinSum = 0\n      var carbsSum = 0\n      var fatSum = 0\n      for (var i = 0; i < ingredients.length; i++) {\n        caloriesSum += ingredients[i].calories\n        proteinSum += ingredients[i].protein\n        carbsSum += ingredients[i].carbs\n        fatSum += ingredients[i].fat\n      }\n      this.mealSum = {\n        calories: this.round(caloriesSum, 1),\n        protein: this.round(proteinSum, 1),\n        carbs: this.round(carbsSum, 1),\n        fat: this.round(fatSum, 1)\n      }\n    },\n    addToDiary(mealIngredients) {\n      var diary_id = this.$cookies.get('diary')\n      mealIngredients.forEach(mealIngredient => {\n        Api.post(`/diaries/${diary_id}/meals`, mealIngredient)\n        .then (response => {\n          this.$cookies.set('date', response.data.date)\n        })\n        .catch(error => {\n        this.errorMessage = error.response.data.message\n        })\n      })\n      setTimeout(() => {\n        this.$router.push({\n        name: 'diary'\n        })\n      }, 500)\n    },\n    round(value, precision) {\n    var multiplier = Math.pow(10, precision || 0);\n    return Math.round(value * multiplier) / multiplier;\n    }\n  }\n}\n",{"version":3,"sources":["Meal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6GA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Meal.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"meal\" class=\"background\">\n      <h2 class=\"heading centerTitle\">\n      <span class=\"heading-highlight\">Add a meal</span>\n    </h2>\n      <b-container>\n        <b-row align-h=\"center\">\n          <b-col cols=\"9\">\n            <b-card class=\"p-3 shadow-sm\">\n              <div v-if=\"errorMessage\" class=\"errorMessage\">\n                {{errorMessage}}\n              </div>\n              <b-row no gutters>\n                <b-col md=\"8\">\n              <b-form>\n                <b-form-group label-cols-sm=\"2\" id=\"mealInput\" label=\"Meal:\" label-for=\"mealType\"\n              >\n                  <b-form-select\n                  id=\"mealType\"\n                  v-model=\"mealType\"\n                  :value=\"null\"\n                  :options=\"{ 'breakfast': 'Breakfast', 'lunch': 'Lunch', 'dinner': 'Dinner', 'snack': 'Snack' }\"\n                  required\n                  >\n                  <template v-slot:first>\n                    <option :value=\"null\">Choose...</option>\n                  </template>\n                  </b-form-select>\n              </b-form-group>\n              <b-form-group label-cols-sm=\"2\" id=\"mealInput\" label=\"Search:\" label-for=\"search\"\n                  >\n              <model-list-select\n                :list=\"options\"\n                v-model=\"objectItem\"\n                option-value=\"_id\"\n                option-text=\"name\"\n                id=\"mySelectId\"\n                name=\"mySelectName\"\n                placeholder=\"Select ingredient\"\n              >\n              </model-list-select>\n              </b-form-group>\n\n              <b-form-group label-cols-sm=\"2\" id=\"mealInput\" label=\"Amount:\" label-for=\"amount\"\n                    >\n                <b-form-input\n                id=\"amount\"\n                v-model=\"amount\"\n                type=\"number\"\n                required\n                placeholder=\"Enter amount in 100g increments e.g., 1.2 = 120g\"\n                ></b-form-input>\n            </b-form-group>\n\n                <div v-if=\"amount\" class=\"flex-result\">\n                <h5>Macronutrients Breakdown per {{amount * 100}}g</h5>\n                <table class=\"ui celled table\">\n                  <thead>\n                  <tr>\n                    <th>Calories (kcal)</th>\n                    <th>Protein (g)</th>\n                    <th>Carbs (g)</th>\n                    <th>Fat (g)</th>\n                  </tr>\n                  </thead>\n                  <tbody>\n                  <tr>\n                    <td>{{round((objectItem.calories * amount), 1)}}</td>\n                    <td>{{round((objectItem.protein * amount), 1)}}</td>\n                    <td>{{round((objectItem.carbs * amount), 1)}}</td>\n                    <td>{{round((objectItem.fat * amount), 1)}}</td>\n                  </tr>\n                  </tbody>\n                </table>\n              </div>\n              <b-button v-if=\"amount && mealType && objectItem.calories\" size=\"sm\" @click=\"addIngredient\">Add to Ingredients List</b-button>\n              <div>\n                <b-button class=\"mt-5 float-right\" type=\"button\" pill variant=\"outline-danger\" router-link :to=\"{name: 'diary'}\">Cancel</b-button>\n              </div>\n            </b-form>\n                </b-col>\n                <b-col style=\"background-color: #f5f3ed\" md=\"4\">\n                  <h5 class=\"text-center\">Your Ingredients List</h5>\n                  <div id=\"addedIngredients\" v-for=\"(ingredient, index) in mealIngredients\" :key=\"index\">\n                  <strong>{{ingredient.amount}}g {{ingredient.name}}</strong><br>\n                    Calories: {{ingredient.calories}}kcal<br>\n                    Protein: {{ingredient.protein}}g<br>\n                    Carbs: {{ingredient.carbs}}g<br>\n                    Fat: {{ingredient.fat}}g<br>\n                    <hr>\n                  </div>\n                  <div v-if=\"mealSum.calories\">\n                  <strong>Total</strong><br>\n                  Calories: {{mealSum.calories}}\n                  Protein: {{mealSum.protein}}\n                  Carbs: {{mealSum.carbs}}\n                  fat: {{mealSum.fat}}<br>\n                  <b-button @click=\"addToDiary(mealIngredients)\" class=\"mb-3 mt-1\" size=\"sm\">Add to diary</b-button>\n                  </div>\n                </b-col>\n              </b-row>\n          </b-card>\n        </b-col>\n      </b-row>\n    </b-container>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport { Api } from '@/Api'\nimport { ModelListSelect } from 'vue-search-select'\n\nexport default {\n  name: 'Meal',\n  components: {\n    ModelListSelect\n  },\n  data() {\n    return {\n      mealType: '',\n      amount: '',\n      mealIngredients: [],\n      mealSum: {\n        calories: null,\n        protein: null,\n        carbs: null,\n        fat: null\n      },\n      options: [],\n      objectItem: {\n        _id: '',\n        name: '',\n        calories: null,\n        protein: null,\n        carbs: null,\n        fat: null\n      },\n      errorMessage: ''\n    }\n  },\n  created() {\n    this.getIngredients()\n  },\n  methods: {\n    getIngredients() {\n      Api.get(`/ingredients`)\n      .then(response => {\n        this.options = response.data.ingredients\n      })\n      .catch(error => {\n        console.log(error)\n      })\n    },\n    addIngredient() {\n      this.mealIngredients.push({\n      name: this.objectItem.name,\n      mealType: this.mealType,\n      amount: this.amount * 100,\n      calories: this.round((this.objectItem.calories * this.amount), 1),\n      protein: this.round((this.objectItem.protein * this.amount), 1),\n      carbs: this.round((this.objectItem.carbs * this.amount), 1),\n      fat: this.round((this.objectItem.fat * this.amount), 1),\n      date: this.$route.params.date\n      })\n      this.getMealSum(this.mealIngredients)\n    },\n    getMealSum(ingredients) {\n      var caloriesSum = 0\n      var proteinSum = 0\n      var carbsSum = 0\n      var fatSum = 0\n      for (var i = 0; i < ingredients.length; i++) {\n        caloriesSum += ingredients[i].calories\n        proteinSum += ingredients[i].protein\n        carbsSum += ingredients[i].carbs\n        fatSum += ingredients[i].fat\n      }\n      this.mealSum = {\n        calories: this.round(caloriesSum, 1),\n        protein: this.round(proteinSum, 1),\n        carbs: this.round(carbsSum, 1),\n        fat: this.round(fatSum, 1)\n      }\n    },\n    addToDiary(mealIngredients) {\n      var diary_id = this.$cookies.get('diary')\n      mealIngredients.forEach(mealIngredient => {\n        Api.post(`/diaries/${diary_id}/meals`, mealIngredient)\n        .then (response => {\n          this.$cookies.set('date', response.data.date)\n        })\n        .catch(error => {\n        this.errorMessage = error.response.data.message\n        })\n      })\n      setTimeout(() => {\n        this.$router.push({\n        name: 'diary'\n        })\n      }, 500)\n    },\n    round(value, precision) {\n    var multiplier = Math.pow(10, precision || 0);\n    return Math.round(value * multiplier) / multiplier;\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}